var map;var marker;var initLat;var initLong;var zoomLevel;var markerArray;//Multiple color//var markerColorArray = ['#00cc00','#00cc00','#66ff33','#66ff33','#99ff33','#99ff33','#ccff33','#ccff33','#ffff00','#ffff00','#ffcc00','#ffcc00','#ff9933','#ff9933','#ff6600','#ff6600','#ff5050','#ff5050','#cc0000','#cc0000' ]; //Five shadesvar markerColorArray = ['#02a9d5','#02a9d5','#02a9d5','#02a9d5','#03c6fc','#03c6fc','#03c6fc','#03c6fc','#9ae8fe','#9ae8fe','#9ae8fe','#9ae8fe','#cdf4fe','#cdf4fe','#cdf4fe','#cdf4fe','#ffffff','#ffffff','#ffffff','#ffffff']; var nOptListings = 20;				//#02A9D5 The deep turquise color				//Function for removing a div and removing marker from map 				function removeDiv(idString) {			// Remove div from the DOM			var elem = document.getElementById(idString);			elem.parentNode.removeChild(elem);			// Get the marker for given listing and remove it from the map			stringListRank = idString.replace(/\D/g,'');			listIndex = Number(stringListRank)-1;			listingMarker = markerArray[listIndex];			listingMarker.setMap(null);		}				// Start bouncing marker		function startBounce(arrayIndex){			listingMarker = markerArray[arrayIndex];			listingMarker.setAnimation(google.maps.Animation.BOUNCE);		}		// Stop bouncing marker		function endBounce(arrayIndex){			listingMarker = markerArray[arrayIndex];			listingMarker.setAnimation(null);		}				// Creates a marker symbol with the requested color		function pinSymbol(color) {    return {        path: 'M 0,0 C -2,-20 -10,-22 -10,-30 A 10,10 0 1,1 10,-30 C 10,-22 2,-20 0,0 z M -2,-30 a 2,2 0 1,1 4,0 2,2 0 1,1 -4,0',        fillColor: color,        fillOpacity: 1,        strokeColor: '#000',        strokeWeight: 1,        scale: 1,   };}				// Adds listener which listens for click in map		function addListenerToMap() {						google.maps.event.addListener(map,'click', function(e) {				// Set the hidden input field to the longitude and latitude 				 var elem = document.getElementById("pos");				elem.value = e.latLng;								//If map has not been clicked before, add a marker				if (marker == null){				placeMarker(e.latLng, map);								 //Else change position of the marker			  } else{				  				  marker.setPosition(e.latLng);			  }	 			  });		  }				//Add a marker to the map		function placeMarker(latLng, map) {  			    marker = new google.maps.Marker({				position: latLng,				map: map,  				});			}					// Initializes the map		function initMap() {		  map = new google.maps.Map(document.getElementById('map'), {			zoom: zoomLevel,			center: {lat: initLat, lng: initLong},			mapTypeId: google.maps.MapTypeId.ROADMAP		  });		           map.data.addListener('mouseout', function(event) {          map.data.revertStyle();        });		        var input = document.getElementById('pac-input');        var searchBox = new google.maps.places.SearchBox(input);        map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);				map.addListener('bounds_changed', function() {          searchBox.setBounds(map.getBounds());        });        var markers = [];           searchBox.addListener('places_changed', function() {          var places = searchBox.getPlaces();          if (places.length == 0) {            return;          }             markers.forEach(function(marker) {            marker.setMap(null);          });          markers = [];          var bounds = new google.maps.LatLngBounds();          places.forEach(function(place) {            var icon = {              url: place.icon,              size: new google.maps.Size(71, 71),              origin: new google.maps.Point(0, 0),              anchor: new google.maps.Point(17, 34),              scaledSize: new google.maps.Size(25, 25)            };            markers.push(new google.maps.Marker({              map: map,              icon: icon,              title: place.name,              position: place.geometry.location            }));            if (place.geometry.viewport) {              bounds.union(place.geometry.viewport);            } else {              bounds.extend(place.geometry.location);            }          });          map.fitBounds(bounds);        });				// Set up marker for user chosen place		symbolColor = "#FF0000";		markerDestination = new google.maps.Marker({				position: destinationLatLong,				map: map,				icon: pinSymbol(symbolColor),  				});					// Set up markers for all relevant listings		markerArray = [];				for (i = 0; i < latLangArray.length; i++){			//Set color for the different markers			if(i<nOptListings){				symbolColor = markerColorArray[i];			}else{				symbolColor = "#FFF";			}			// Create marker			markerArray[i] = new google.maps.Marker({				position: latLangArray[i],				map: map,				icon: pinSymbol(symbolColor),  				});						}		}